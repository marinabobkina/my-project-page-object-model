# О проекте
Автоматизированные UI‑тесты интернет‑магазина Demo Web Shop, реализованные по паттерну Page Object Model (POM) на Python + Selenium + Pytest. Проект демонстрирует структурированный подход: каждая страница сайта инкапсулирует локаторы и действия, а тесты работают с высокоуровневыми методами страниц.

## Технологии и стек
- Python 3.10+
- Selenium WebDriver (Selenium Manager для драйверов)
- Pytest
- python-dotenv (для загрузки переменных из `.env`)
- Google Chrome

## Структура проекта
```
my_project_page_object_model/
├─ base/
│  ├─ base_page.py      # Базовые методы и общие элементы (поиск, корзина, ожидания)
│  └─ base_test.py      # (если используется) Общая база для тест-кейсов
├─ pages/
│  ├─ login_page.py     # Страница логина (ввод логина/пароля, сабмит)
│  ├─ main_page.py      # Главная (проверка аккаунта, выбор пункта меню)
│  ├─ books_page.py     # Раздел Books (случайный выбор товара, добавление в корзину)
│  ├─ cart_page.py      # Корзина (проверка названия и цены)
│  └─ product_page.py   # (если используется) Страница товара
├─ config/
│  ├─ links.py          # Все URL-адреса проекта (HOST, LOGIN_PAGE, и т.д.)
│  └─ data.py           # Данные и переменные окружения (LOGIN, PASSWORD)
├─ tests/
│  └─ test_order.py     # Тест(ы) добавления товара в корзину/оформления
├─ conftest.py          # Фикстура `driver` для Pytest (инициализация/закрытие Chrome)
└─ README.md
```

## Ключевые идеи POM в проекте
- Каждый класс страницы наследует `BasePage` и содержит:
  - `PAGE_URL` — URL страницы (см. `config/links.py`).
  - Локаторы как кортежи `(by, value)`.
  - Методы действий и проверок с явными ожиданиями (`WebDriverWait`, `expected_conditions`).
- `BasePage` предоставляет общие возможности:
  - `open()` и `is_opened()` для навигации и проверки URL.
  - `search_product(product_name)` — универсальный поиск по сайту.
  - `go_to_cart()` — переход в корзину.
- Страницы инкапсулируют детали Selenium, тесты читаются как сценарии высокого уровня.

## Что реализовано
- Авторизация: `LoginPage.auth(login, password)`.
- Главная: проверка отображения имени аккаунта, переход в разделы меню.
- Books: случайный выбор товара, чтение названия и цены, добавление в корзину с проверкой уведомления.
- Корзина: проверки наличия товара по имени и цене.
- Фикстура `driver` в `conftest.py` настраивает Chrome (максимизация окна, отключение PasswordLeakDetection) и гарантирует закрытие браузера.

## Подготовка окружения
1) Установите зависимости:
```
pip install -r requirements.txt
```
Если файла `requirements.txt` нет, установите вручную:
```
pip install selenium pytest python-dotenv
```

2) Установите Google Chrome (актуальной версии). Selenium 4.6+ умеет автоматически управлять драйверами через Selenium Manager, дополнительная установка ChromeDriver обычно не требуется.

3) Создайте файл `.env` в корне проекта со своими данными авторизации:
```
LOGIN=your_login@example.com
PASSWORD=your_secure_password
```
`config/data.py` загрузит эти переменные через `python-dotenv`.

## Запуск тестов
Из корня проекта выполните:
```
pytest -v -s
```
- Ключ `-s` оставляет вывод `print()`/логов, `-v` — подробный прогон.
- По умолчанию Pytest найдёт тесты в папке `tests`.

## Пример сценария (концептуально)
- Залогиниться через `LoginPage` с данными из `.env`.
- На главной проверить наличие имени аккаунта и перейти в раздел `Books`.
- На странице `Books` случайно выбрать товар, получить его имя и цену, добавить в корзину.
- Перейти в корзину и убедиться, что товар с нужным именем и ценой присутствует.

## Настройки и константы
- Все ссылки хранит `config/links.py`:
  - `HOST = "https://demowebshop.tricentis.com/"`
  - `LOGIN_PAGE`, `MAIN_PAGE`, `BOOKS_PAGE`, `CART_PAGE` и т.д.
- Чувствительные данные считываются в `config/data.py`:
  - `Data.LOGIN`, `Data.PASSWORD`.

## Полезные детали реализации
- Ожидания: во всех страницах применяется `WebDriverWait(..., 10, poll_frequency=1)`.
- Локаторы: XPath‑локаторы сгруппированы по страницам; общий поиск и корзина находятся в `BasePage`.
- Обработка ошибок: пример в `MainPage.check_my_account()` — перехват `TimeoutException` с понятным сообщением для отчёта.


